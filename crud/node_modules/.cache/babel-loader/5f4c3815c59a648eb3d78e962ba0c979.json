{"ast":null,"code":"import axios from 'axios'; // protected request --> [perlu token]\n\nconst accessToken = localStorage.getItem('access_token'); // sessionStorage.getItem --> tdk bagus karena bisa kena hack\n// bagusnya disimpen di cookies\n\nconst request = axios.create({\n  baseURL: 'http://localhost:7777' // for token\n  // headers: {\n  //     'authorization': accessToken\n  // }\n\n});\nrequest.interceptors.response.use(res => res.data, err => {\n  var _err$response;\n\n  console.log(err); // jika token salah, akan dilempar ke logout\n\n  if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 403) {\n    localStorage.removeItem('access_token');\n    window.location.href = '/';\n  }\n\n  throw new Error(err.message || 'Error');\n});\nexport default request;","map":{"version":3,"names":["axios","accessToken","localStorage","getItem","request","create","baseURL","interceptors","response","use","res","data","err","console","log","status","removeItem","window","location","href","Error","message"],"sources":["D:/DiBimbing .ID Batch7/Day 34/crud/src/helpers/request.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// protected request --> [perlu token]\r\n\r\nconst accessToken = localStorage.getItem('access_token'); // sessionStorage.getItem --> tdk bagus karena bisa kena hack\r\n// bagusnya disimpen di cookies\r\n\r\nconst request = axios.create({\r\n    baseURL: 'http://localhost:7777',\r\n    \r\n    // for token\r\n    // headers: {\r\n    //     'authorization': accessToken\r\n    // }\r\n})\r\n\r\nrequest.interceptors.response.use(\r\n    (res) => res.data,\r\n    (err) => {\r\n        console.log(err);\r\n\r\n        // jika token salah, akan dilempar ke logout\r\n        if(err.response?.status === 403){\r\n            localStorage.removeItem('access_token')\r\n            window.location.href = '/'\r\n        }\r\n\r\n        throw new Error(err.message || 'Error')\r\n    }\r\n)\r\n\r\nexport default request;"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;;AAEA,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAApB,C,CAA0D;AAC1D;;AAEA,MAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;EACzBC,OAAO,EAAE,uBADgB,CAGzB;EACA;EACA;EACA;;AANyB,CAAb,CAAhB;AASAF,OAAO,CAACG,YAAR,CAAqBC,QAArB,CAA8BC,GAA9B,CACKC,GAAD,IAASA,GAAG,CAACC,IADjB,EAEKC,GAAD,IAAS;EAAA;;EACLC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EADK,CAGL;;EACA,IAAG,kBAAAA,GAAG,CAACJ,QAAJ,gEAAcO,MAAd,MAAyB,GAA5B,EAAgC;IAC5Bb,YAAY,CAACc,UAAb,CAAwB,cAAxB;IACAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;EACH;;EAED,MAAM,IAAIC,KAAJ,CAAUR,GAAG,CAACS,OAAJ,IAAe,OAAzB,CAAN;AACH,CAZL;AAeA,eAAejB,OAAf"},"metadata":{},"sourceType":"module"}